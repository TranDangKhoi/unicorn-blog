"use strict";(self.webpackChunkunicorn_blog=self.webpackChunkunicorn_blog||[]).push([[132],{4762:function(e,r,n){n.d(r,{Y:function(){return l}});var s=n(1413),a=n(4925),t=(n(2791),n(1134)),o=n(184),c=["checked","children","control","name"],l=function(e){var r=e.checked,n=e.children,l=e.control,i=e.name,d=(0,a.Z)(e,c),u=(0,t.bc)({control:l,name:i,defaultValue:""}).field;return(0,o.jsxs)("label",{children:[(0,o.jsx)("input",(0,s.Z)((0,s.Z)({checked:r,type:"radio",className:"hidden-input"},u),d)),(0,o.jsxs)("div",{className:"flex items-center font-medium cursor-pointer gap-x-3",children:[(0,o.jsx)("div",{className:"w-7 h-7 rounded-full border flex items-center justify-center p-1  ".concat(r?"bg-primary border-primary text-white":"border-gray-300 border-2 text-transparent"),children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}),(0,o.jsx)("span",{children:n})]})]})}},5132:function(e,r,n){n.r(r);var s=n(4165),a=n(5861),t=n(3951),o=n(8654),c=n(5510),l=n(2112),i=n(4762),d=n(5593),u=n(9808),m=n(1199),h=n(3002),x=n(9062),p=n(3663),v=n(6524),f=n(1134),w=n(9085),j=n(333),g=n.n(j),b=n(1830),N=n.n(b),C=n(3585),k=n(184);r.default=function(){var e=(0,u.a)().userInfo,r=(0,f.cI)({mode:"onChange",defaultValues:{username:"",avatar:"",email:"",password:"",createdAt:new Date,status:C.iQ.ACTIVE,role:C.xZ.USER}}),n=r.control,j=r.reset,b=r.getValues,y=r.setValue,Z=r.watch,I=r.handleSubmit,A=r.formState,E=A.isSubmitting,D=(A.errors,Number(Z("status"))),B=Number(Z("role")),R=(0,p.Z)(y,b),S=R.imageURL,U=R.progress,_=R.handleResetUploadAfterSubmit,M=R.handleRemoveImage,Q=R.handleSelectImage,V=function(){var e=(0,a.Z)((0,s.Z)().mark((function e(r){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:N().fire({title:"Are you sure you want to create this user?",html:"\n      <div>Username: ".concat(r.username,"</div>\n      <div>E-mail address: ").concat(r.email,"</div>\n      <div>Password: ").concat(r.password,"</div>\n      <div>Status: ").concat(r.status,"</div>\n      <div>Role: ").concat(r.role,"</div>\n      "),icon:"question",showConfirmButton:!0,confirmButtonText:"Confirm",confirmButtonColor:"#1DC071",showCancelButton:!0,cancelButtonColor:"#d33",cancelButtonText:"No, cancel!"}).then(function(){var e=(0,a.Z)((0,s.Z)().mark((function e(n){var a;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.isConfirmed){e.next=19;break}return e.prev=1,e.next=4,(0,h.Xb)(m.I,r.email,r.password);case 4:return a=e.sent,e.next=7,(0,h.ck)(m.I.currentUser,{displayName:r.username,photoURL:"https://ui-avatars.com/api/?background=random&name=".concat(r.username)});case 7:return e.next=9,(0,x.ET)((0,x.hJ)(m.db,"users"),{username:r.username,avatar:"https://ui-avatars.com/api/?background=random&name=".concat(r.username),email:r.email,password:r.password,createdAt:(0,x.Bt)(),status:Number(r.status),role:Number(r.role),userId:a.user.uid,usernameSlug:g()(r.username,{lower:!0})});case 9:j({username:"",avatar:"",email:"",password:"",createdAt:new Date,status:C.iQ.ACTIVE,role:C.xZ.USER}),N().fire({icon:"success",iconColor:"#1DC071",title:"Created user successfully",timer:1500,showConfirmButton:!1}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),w.Am.error("Failed to create new user",{autoClose:1500}),console.log(e.t0);case 17:e.next=20;break;case 19:n.dismiss===N().DismissReason.cancel&&N().fire({icon:"success",iconColor:"#1DC071",title:"Cancelled creating user successfully",timer:1500,showConfirmButton:!1});case 20:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(r){return e.apply(this,arguments)}}()),_();case 2:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();return(null===e||void 0===e?void 0:e.role)!==C.xZ.ADMIN&&(null===e||void 0===e?void 0:e.role)!==C.xZ.MOD?null:(0,k.jsxs)("div",{children:[(0,k.jsx)(v.Z,{title:"New user",desc:"Add new user to system"}),(0,k.jsxs)("form",{onSubmit:I(V),children:[(0,k.jsx)("div",{className:"w-[250px] h-[250px] mx-auto rounded-full mb-10",children:(0,k.jsx)(d.U,{name:"image",className:"h-full rounded-full",onChange:Q,handleRemoveImage:M,scrollable:!1,centeredCloseIcon:!0,imageURL:S,progress:U})}),(0,k.jsx)("div",{className:"form-layout",children:(0,k.jsxs)(o.g,{children:[(0,k.jsx)(l.__,{children:"Username"}),(0,k.jsx)(c.I,{name:"username",placeholder:"Enter your username",control:n})]})}),(0,k.jsxs)("div",{className:"form-layout",children:[(0,k.jsxs)(o.g,{children:[(0,k.jsx)(l.__,{children:"Email"}),(0,k.jsx)(c.I,{name:"email",placeholder:"Enter your email address",control:n,type:"email"})]}),(0,k.jsxs)(o.g,{children:[(0,k.jsx)(l.__,{children:"Password"}),(0,k.jsx)(c.C,{name:"password",placeholder:"Enter your password",control:n,type:"password"})]})]}),(0,k.jsxs)("div",{className:"form-layout",children:[(0,k.jsxs)(o.g,{children:[(0,k.jsx)(l.__,{children:"Status"}),(0,k.jsxs)(o.v,{children:[(0,k.jsx)(i.Y,{name:"status",control:n,checked:D===C.iQ.ACTIVE,value:C.iQ.ACTIVE,children:"Active"}),(0,k.jsx)(i.Y,{name:"status",control:n,checked:D===C.iQ.PENDING,value:C.iQ.PENDING,children:"Pending"}),(0,k.jsx)(i.Y,{name:"status",control:n,checked:D===C.iQ.BANNED,value:C.iQ.BANNED,children:"Banned"})]})]}),(0,k.jsxs)(o.g,{children:[(0,k.jsx)(l.__,{children:"Role"}),(0,k.jsxs)(o.v,{children:[(0,k.jsx)(i.Y,{name:"role",control:n,checked:B===C.xZ.ADMIN,value:C.xZ.ADMIN,children:"Admin"}),(0,k.jsx)(i.Y,{name:"role",control:n,checked:B===C.xZ.MOD,value:C.xZ.MOD,children:"Moderator"}),(0,k.jsx)(i.Y,{name:"role",control:n,checked:B===C.xZ.USER,value:C.xZ.USER,children:"User"})]})]})]}),(0,k.jsx)(t.z,{kind:"primary",type:"submit",isLoading:E,disabled:E,className:"mx-auto w-[200px]",children:"Add new user"})]})]})}}}]);
//# sourceMappingURL=132.761faf13.chunk.js.map