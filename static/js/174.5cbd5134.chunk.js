"use strict";(self.webpackChunkunicorn_blog=self.webpackChunkunicorn_blog||[]).push([[174],{190:function(e,n,t){t.d(n,{nO:function(){return o},yd:function(){return c},kl:function(){return s}});t(2791);var r=t(184),s=function(e){var n=e.onClick,t=void 0===n?function(){}:n;return(0,r.jsx)("span",{className:"flex items-center justify-center w-10 h-10 border border-gray-200 rounded cursor-pointer",onClick:t,children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})},c=function(e){var n=e.onClick,t=void 0===n?function(){}:n;return(0,r.jsx)("span",{className:"flex items-center justify-center w-10 h-10 border border-gray-200 rounded cursor-pointer",onClick:t,children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})})},o=function(e){var n=e.onClick,t=void 0===n?function(){}:n;return(0,r.jsx)("span",{className:"flex items-center justify-center w-10 h-10 border border-gray-200 rounded cursor-pointer",onClick:t,children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})}},6178:function(e,n,t){t.d(n,{i:function(){return i}});var r,s=t(168),c=(t(2791),t(6444)),o=t(184),a=c.ZP.div(r||(r=(0,s.Z)(["\n  overflow-x: auto;\n  background-color: white;\n  border-radius: 10px;\n  &::-webkit-scrollbar {\n    width: 5px; // set width cho scrollbar\n    border-radius: 100rem;\n  }\n\n  &::-webkit-scrollbar-track {\n    width: 5px; // set width cho scrollbar\n\n    background: #ccc; // set background cho scrollbar track (c\xe1c ph\u1ea7n c\xf3 m\xe0u ghi ch\u01b0a \u0111\u01b0\u1ee3c k\xe9o t\u1edbi)\n    border-radius: 100rem;\n  }\n\n  &::-webkit-scrollbar-thumb {\n    width: 5px; // set width cho scrollbar\n    background: ","; // setback ground cho ch\xednh thanh scrollbar\n    border-radius: 100rem;\n  }\n  table {\n    width: 100%;\n  }\n  thead {\n    background-color: #f0f0f0;\n  }\n  th,\n  td {\n    vertical-align: middle;\n    text-align: center;\n  }\n  th {\n    padding: 20px 30px;\n    font-weight: 700;\n    text-align: center;\n  }\n  td {\n    padding: 15px 30px;\n    white-space: nowrap;\n  }\n  tbody {\n    background-color: #f8f8f8;\n  }\n  tbody td {\n    font-weight: 500;\n    font-size: 17px;\n  }\n  tbody tr {\n    border-bottom-color: transparent;\n  }\n  @media screen and (max-width: 1279.98px) {\n    thead th {\n      font-size: 16px;\n    }\n    tbody td {\n      font-size: 14px;\n    }\n  }\n"])),(function(e){return e.theme.primary})),i=function(e){var n=e.children,t=e.className,r=void 0===t?"":t;return(0,o.jsx)(a,{className:r,children:(0,o.jsx)("table",{children:n})})}},1174:function(e,n,t){t.r(n);var r=t(4165),s=t(2982),c=t(1413),o=t(5861),a=t(885),i=t(190),d=t(3951),l=t(2112),u=t(9606),h=t(6178),x=t(9808),f=t(1199),p=t(9062),m=t(7590),j=t(763),b=t(6524),v=t(2791),w=t(7689),g=t(9085),k=t(1830),y=t.n(k),N=t(3585),Z=t(184);n.default=function(){var e=(0,x.a)().userInfo,n=(0,v.useState)([]),t=(0,a.Z)(n,2),k=t[0],C=t[1],L=(0,v.useState)(""),O=(0,a.Z)(L,2),I=O[0],A=O[1],E=(0,v.useState)({}),P=(0,a.Z)(E,2),B=P[0],D=P[1],T=(0,v.useState)(!1),z=(0,a.Z)(T,2),M=z[0],S=z[1],X=(0,w.s0)(),J=(0,m.Z)(),R=J.displayLocalTimeAndDateBySeconds,H=J.displayTruncatedID,U=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(){var n,t,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,p.IO)((0,p.hJ)(f.db,"posts"),(0,p.Xo)("name","desc"),(0,p.TQ)(B||0),(0,p.b9)(8)),(0,p.cf)(n,(function(e){var n=[];e.docs.forEach((function(e){n.push((0,c.Z)({id:e.id},e.data()))}));var t=0===e.size;S(t),C([].concat((0,s.Z)(k),n))})),e.next=4,(0,p.PL)(n);case 4:t=e.sent,o=t.docs[t.docs.length-1],D(o);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,v.useEffect)((function(){function n(){return(n=(0,o.Z)((0,r.Z)().mark((function n(){var t,s,o,a,i,d,l;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=(0,p.hJ)(f.db,"posts"),e.role===N.xZ.ADMIN||e.role===N.xZ.MOD){n.next=11;break}return s=I?(0,p.IO)(t,(0,p.ar)("name",">=",I),(0,p.ar)("name","<=",I+"utf8"),(0,p.ar)("userId","==",f.I.currentUser.uid),(0,p.Xo)("name","desc")):(0,p.IO)(t,(0,p.b9)(8),(0,p.ar)("userId","==",e.uid),(0,p.Xo)("createdAt","desc")),n.next=5,(0,p.PL)(s);case 5:o=n.sent,a=o.docs[o.docs.length-1],(0,p.cf)(s,t,(function(e){var n=[];e.docs.forEach((function(e){n.push((0,c.Z)({id:e.id},e.data()))})),C(n)})),D(a),n.next=18;break;case 11:return i=I?(0,p.IO)(t,(0,p.ar)("name",">=",I),(0,p.ar)("name","<=",I+"utf8"),(0,p.Xo)("name","desc")):(0,p.IO)(t,(0,p.b9)(8),(0,p.Xo)("createdAt","desc")),n.next=14,(0,p.PL)(i);case 14:d=n.sent,l=d.docs[d.docs.length-1],(0,p.cf)(i,t,(function(e){var n=[];e.docs.forEach((function(e){n.push((0,c.Z)({id:e.id},e.data()))})),C(n)})),D(l);case 18:case"end":return n.stop()}}),n)})))).apply(this,arguments)}!function(){n.apply(this,arguments)}()}),[I,e.role,e.uid]);var W=(0,j.debounce)((function(e){A(e.target.value)}),1e3),Y=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t=(0,p.JU)(f.db,"posts",n),y().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#1DC071",cancelButtonColor:"#d33",cancelButtonText:"NO STOP!",confirmButtonText:"Yes, delete it!"}).then(function(){var e=(0,o.Z)((0,r.Z)().mark((function e(n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.isConfirmed){e.next=5;break}return e.next=3,(0,p.oe)(t);case 3:A(""),y().fire("Deleted!","Your file has been deleted.","success");case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())}catch(s){g.Am.error(s.message)}case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),V=function(e){switch(e){case N.cf.APPROVED:return(0,Z.jsx)(l.OE,{type:"approved",children:"Active"});case N.cf.PENDING:return(0,Z.jsx)(l.OE,{type:"pending",children:"Pending"});case N.cf.REJECTED:return(0,Z.jsx)(l.OE,{type:"reject",children:"Rejected"})}};return(0,Z.jsxs)("div",{children:[(0,Z.jsx)(u.X6,{children:"Manage posts"}),(0,Z.jsx)("div",{className:"flex justify-end mb-10",children:(0,Z.jsx)("div",{className:"w-full max-w-[300px]",children:(0,Z.jsx)("input",{type:"text",className:"w-full p-4 border border-gray-300 border-solid rounded-lg",placeholder:"Search post...",onChange:W})})}),(0,Z.jsxs)(h.i,{children:[(0,Z.jsx)("thead",{children:(0,Z.jsxs)("tr",{children:[(0,Z.jsx)("th",{children:"Id"}),(0,Z.jsx)("th",{children:"Thumbnail"}),(0,Z.jsx)("th",{children:"Post"}),(0,Z.jsx)("th",{children:"Category"}),(0,Z.jsx)("th",{children:"Author"}),(0,Z.jsx)("th",{children:"Status"}),(0,Z.jsx)("th",{children:"Actions"})]})}),(0,Z.jsx)("tbody",{children:k.length>0&&k.map((function(e){return(0,Z.jsxs)("tr",{children:[(0,Z.jsx)("td",{title:e.id,children:H(null===e||void 0===e?void 0:e.id,8)}),(0,Z.jsx)("td",{children:(0,Z.jsx)("div",{className:"flex items-center gap-x-3",children:(0,Z.jsx)("img",{src:e.imageURL,alt:"",className:"w-[100px] h-[75px] rounded-lg object-cover"})})}),(0,Z.jsx)("td",{className:"!text-left",children:(0,Z.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,Z.jsx)("h3",{className:"font-semibold max-w-[300px] whitespace-pre-wrap line-clamp-2",children:e.title}),(0,Z.jsxs)("time",{className:"text-sm text-gray-500",children:["Posted at:"," ",R(e.createdAt.seconds)]})]})}),(0,Z.jsx)("td",{children:(0,Z.jsx)("span",{className:"text-gray-500",children:e.category.name})}),(0,Z.jsx)("td",{children:(0,Z.jsx)("span",{className:"text-gray-500",children:e.user.username})}),(0,Z.jsx)("td",{children:V(e.status)}),(0,Z.jsx)("td",{children:(0,Z.jsxs)("div",{className:"flex items-center text-gray-500 gap-x-3",children:[(0,Z.jsx)(i.kl,{onClick:function(){return X("/".concat(e.slug))}}),(0,Z.jsx)(i.yd,{onClick:function(){return X("/manage/update-post?id=".concat(e.id))}}),(0,Z.jsx)(i.nO,{onClick:function(){return Y(e.id)}})]})})]},e.id)}))})]}),M?(0,Z.jsx)(b.Z,{className:"italic text-center",desc:"The end.",title:"No more data"}):(0,Z.jsx)("div",{className:"mt-10",children:(0,Z.jsx)(d.z,{onClick:U,children:"Load more"})})]})}}}]);
//# sourceMappingURL=174.5cbd5134.chunk.js.map