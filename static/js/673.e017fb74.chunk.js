"use strict";(self.webpackChunkunicorn_blog=self.webpackChunkunicorn_blog||[]).push([[673],{7963:function(e,n,r){r.d(n,{f:function(){return t}});var t="https://api.imgbb.com/1/upload?key=3c83bf0d94037028b0b4041a18bcb093"},1023:function(e,n,r){r.d(n,{L:function(){return h}});var t=r(1413),a=r(4925),o=r(885),s=r(2791),i=r(184),c=(0,s.createContext)();function l(e){var n=(0,s.useState)(!1),r=(0,o.Z)(n,2),a=r[0],l=r[1],u={show:a,setShow:l,handleToggleDropdown:function(){l(!a)}};return(0,i.jsx)(c.Provider,(0,t.Z)((0,t.Z)({value:u},e),{},{children:e.children}))}function u(){var e=(0,s.useContext)(c);if("undefined"===typeof e)throw new Error("useDropdown must be used within DropdownProvider");return e}var d=["children"],h=function(e){var n=e.children,r=(0,a.Z)(e,d);return(0,i.jsx)(l,(0,t.Z)((0,t.Z)({},r),{},{children:(0,i.jsx)("div",{className:"relative inline-block w-full",children:n})}))},p=function(e){var n=e.onClick,r=u().setShow;return(0,i.jsx)("div",{className:"py-[15px] px-[25px] transition-all border-l-4 border-l-transparent cursor-pointer flex items-center justify-between hover:text-primary hover:border-l-primary",onClick:function(){n&&n(),r(!1)},children:e.children})},m=["placeholder"],f=function(e){var n=e.placeholder,r=(0,a.Z)(e,m),o=u().onChange;return(0,i.jsx)("div",{className:"p-2",children:(0,i.jsx)("input",(0,t.Z)({type:"text",placeholder:n,className:"w-full p-4 border border-gray-200 rounded outline-none",onChange:o},r))})},g=r(950),x=function(e){var n=e.placeholder,r=void 0===n?"Please select an category":n,t=e.className,a=void 0===t?"":t,o=u(),s=o.show,c=o.handleToggleDropdown;return(0,i.jsxs)("div",{className:"".concat(a," py-[15px] rounded-lg border border-gray-200 px-[25px] cursor-pointer flex items-center justify-between"),onClick:c,children:[(0,i.jsx)("span",{children:r}),(0,i.jsx)("span",{children:s?(0,i.jsx)(g.Cz,{}):(0,i.jsx)(g.BD,{})})]})},v=function(e){var n=e.children,r=u().show;return(0,i.jsx)(i.Fragment,{children:r&&(0,i.jsx)("div",{className:"absolute left-0 z-20 w-full bg-white border border-gray-200 shadow-sm border-t-transparent top-full",children:n})})};h.Option=p,h.Search=f,h.Select=x,h.List=v},4762:function(e,n,r){r.d(n,{Y:function(){return c}});var t=r(1413),a=r(4925),o=(r(2791),r(1134)),s=r(184),i=["checked","children","control","name"],c=function(e){var n=e.checked,r=e.children,c=e.control,l=e.name,u=(0,a.Z)(e,i),d=(0,o.bc)({control:c,name:l,defaultValue:""}).field;return(0,s.jsxs)("label",{children:[(0,s.jsx)("input",(0,t.Z)((0,t.Z)({checked:n,type:"radio",className:"hidden-input"},d),u)),(0,s.jsxs)("div",{className:"flex items-center font-medium cursor-pointer gap-x-3",children:[(0,s.jsx)("div",{className:"w-7 h-7 rounded-full border flex items-center justify-center p-1  ".concat(n?"bg-primary border-primary text-white":"border-gray-300 border-2 text-transparent"),children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}),(0,s.jsx)("span",{children:r})]})]})}},7050:function(e,n,r){r.d(n,{Z:function(){return i}});var t=r(1413),a=r(4925),o=(r(2791),r(184)),s=["name","on","onClick"],i=function(e){var n=e.name,r=e.on,i=e.onClick,c=(0,a.Z)(e,s);return(0,o.jsxs)("label",{children:[(0,o.jsx)("input",{type:"checkbox",name:n,id:n,checked:r,onClick:i,className:"hidden-input",onChange:function(){}}),(0,o.jsx)("div",(0,t.Z)((0,t.Z)({className:"inline-block w-[100px] h-[52px] relative cursor-pointer rounded-full p-1 transition-all ".concat(r?"bg-primary":"bg-gray-300")},c),{},{children:(0,o.jsx)("span",{className:"transition-all w-11 h-11 bg-white rounded-full inline-block ".concat(r?"translate-x-[48px]":"")})}))]})}},1776:function(e,n,r){r.d(n,{Z:function(){return d}});var t=r(4165),a=r(5861),o=r(885),s=r(1199),i=r(3002),c=r(4453),l=r(2791),u=r(9085);function d(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,d=(0,l.useState)(0),h=(0,o.Z)(d,2),p=h[0],m=h[1],f=(0,l.useState)(""),g=(0,o.Z)(f,2),x=g[0],v=g[1];if(e&&n){var b=function(e){if(e&&e.type.includes("image/")){var n=(0,c.cF)(),r=(0,c.iH)(n,"images/"+e.name),t=(0,c.B0)(r,e);t.on("state_changed",(function(e){var n=e.bytesTransferred/e.totalBytes*100;switch(m(n),e.state){case"paused":u.Am.info("Upload is paused");break;case"running":console.log("Upload is running");break;default:console.log("Nothing at all")}}),(function(e){switch(e.code){case"storage/unauthorized":u.Am.error("You must login to use this feature",{hideProgressBar:!0});break;case"storage/canceled":u.Am.info("You have just cancelled the upload progress!");break;case"storage/unknown":u.Am.error("Unknown error occurred, inspect error.serverResponse")}}),(function(){(0,c.Jt)(t.snapshot.ref).then((function(e){console.log("File available at",e),v(e)}))}))}else u.Am.error("You can only upload image files",{autoClose:4e3,pauseOnHover:!0})},j=function(n){var r=n.target.files[0];e("image_name",r.name),b(r)},w=function(){v(""),m(0)},y=function(){var e=(0,c.cF)(),t=(0,c.iH)(e,"images/"+(r||n("image_name")));(0,c.oq)(t).then((function(){console.log("Uploaded image removed successfully!"),w()})).catch((function(e){console.log("Failed to remove image")}))},Z=function(){var e=(0,c.cF)(),r=(0,c.iH)(e,"images/"+n("image_name"));(0,c.oq)(r).then((0,a.Z)((0,t.Z)().mark((function e(){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Uploaded image removed successfully!"),e.next=3,(0,i.ck)(s.I.currentUser,{photoURL:"https://ui-avatars.com/api/?background=random&name=".concat(s.I.currentUser.displayName)});case 3:w();case 4:case"end":return e.stop()}}),e)})))).catch((function(e){console.log("Failed to remove image")}))};return{imageURL:x,progress:p,setImageURL:v,setProgress:m,handleRemoveImage:y,handleRemoveAvatar:Z,handleSelectImage:j,handleUploadImage:b}}}},2673:function(e,n,r){r.r(n);var t=r(1413),a=r(4165),o=r(5861),s=r(885),i=r(9062),c=r(2791),l=r(1134),u=r(6770),d=r.n(u),h=r(8113),p=r(1087),m=r(3951),f=r(1023),g=r(8654),x=r(5510),v=r(2112),b=r(4762),j=r(7050),w=r(5593),y=r(1199),Z=r(1776),k=r(6524),N=r(3585),C=(r(6009),r(9085)),U=r(7963),_=r(1044),S=r(184);u.Quill.register("modules/imageUploader",h.Z);n.default=function(){var e=(0,p.lr)(),n=(0,s.Z)(e,1)[0].get("id"),r=(0,c.useState)([]),u=(0,s.Z)(r,2),h=u[0],L=u[1],E=(0,c.useState)(""),I=(0,s.Z)(E,2),R=I[0],F=I[1],P=(0,c.useState)(""),D=(0,s.Z)(P,2),A=D[0],T=D[1],q=(0,l.cI)({mode:"onSubmit"}),Y=q.handleSubmit,J=q.control,O=q.watch,V=q.reset,B=q.setValue,H=q.getValues,z=q.formState,Q=z.isSubmitting,G=z.isValid,M=(z.errors,Number(O("status"))),W=O("popular"),K=H("imageURL"),X=H("image_name"),$=(0,Z.Z)(B,H,X,(function(){return oe.apply(this,arguments)})),ee=$.handleRemoveImage,ne=$.setImageURL,re=$.imageURL,te=$.handleSelectImage,ae=$.progress;function oe(){return(oe=(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(0,c.useEffect)((function(){function e(){return(e=(0,o.Z)((0,a.Z)().mark((function e(){var r,t,o,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return r=(0,i.JU)(y.db,"posts",n),e.next=5,(0,i.QT)(r);case 5:(t=e.sent).data()&&(V(t.data()),F((null===(o=t.data())||void 0===o?void 0:o.category)||""),T((null===(s=t.data())||void 0===s?void 0:s.content)||""));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[n,V]),(0,c.useEffect)((function(){function e(){return(e=(0,o.Z)((0,a.Z)().mark((function e(){var n,r,o,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,i.hJ)(y.db,"categories"),r=(0,i.IO)(n,(0,i.ar)("status","==",1)),e.next=4,(0,i.PL)(r);case 4:o=e.sent,s=[],o.forEach((function(e){s.push((0,t.Z)({id:e.id},e.data()))})),L(s);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),(0,c.useEffect)((function(){ne(K)}),[K,ne]);var se=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(G){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,r=(0,i.JU)(y.db,"posts",n),e.next=6,(0,i.r7)(r,{content:A});case 6:C.Am.success("Post updated successfully",{autoClose:1500}),e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(2),console.log(e.t0),e.abrupt("return",e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}();var ie=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(n){var r,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,i.JU)(y.db,"categories",n.id),e.next=3,(0,i.QT)(r);case 3:o=e.sent,B("category",(0,t.Z)({id:o.id},o.data())),F(n);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),ce=(0,c.useMemo)((function(){return{toolbar:[["bold","italic","underline","strike"],["blockquote"],[{align:""},{align:"center"},{align:"right"},{align:"justify"}],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{header:[1,2,3,4,!1]}],["clean"],["image"]],imageUploader:{upload:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(n){var r,t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("image",n),e.next=4,(0,_.ZP)({method:"post",url:U.f,data:r,headers:{"Content-Type":"multipart/form-data"}});case 4:return t=e.sent,e.abrupt("return",t.data.data.url);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()}}}),[]);return n?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(k.Z,{title:"Update your post",desc:"Update post's contents"}),(0,S.jsxs)("form",{className:"mt-10 form-layout",onSubmit:Y(se),children:[(0,S.jsxs)("div",{className:"grid grid-cols-2 mb-10 gap-x-10",children:[(0,S.jsxs)(g.g,{children:[(0,S.jsx)(v.__,{required:!0,htmlFor:"title",children:"Title"}),(0,S.jsx)(x.I,{control:J,placeholder:"Enter your title",name:"title"})]}),(0,S.jsxs)(g.g,{children:[(0,S.jsx)(v.__,{htmlFor:"slug",children:"Slug"}),(0,S.jsx)(x.I,{control:J,placeholder:"Enter your slug",name:"slug"})]}),(0,S.jsxs)(g.g,{children:[(0,S.jsx)(v.__,{htmlFor:"author",children:"Author"}),(0,S.jsx)(x.I,{control:J,name:"author",placeholder:"Who's the author"})]}),(0,S.jsxs)(g.g,{children:[(0,S.jsx)(v.__,{required:!0,htmlFor:"category",children:"Category"}),(0,S.jsxs)(f.L,{children:[(0,S.jsx)(f.L.Select,{}),(0,S.jsx)(f.L.List,{children:h.length>0&&h.map((function(e){return(0,S.jsx)(f.L.Option,{onClick:function(){return ie(e)},children:e.name},e.id)}))})]}),(null===R||void 0===R?void 0:R.name)&&(0,S.jsx)("span",{className:"inline-block p-4 text-sm font-semibold text-white rounded-lg bg-primary",children:null===R||void 0===R?void 0:R.name})]})]}),(0,S.jsx)("div",{className:"mb-10 entry-content",children:(0,S.jsxs)(g.g,{children:[(0,S.jsx)(v.__,{required:!0,children:"Edit your post's content:"}),(0,S.jsx)("div",{className:"w-full",children:(0,S.jsx)(d(),{modules:ce,theme:"snow",value:A,onChange:T})})]})}),(0,S.jsx)("div",{className:"w-full h-full mb-10",children:(0,S.jsxs)(g.g,{children:[(0,S.jsx)(v.__,{required:!0,htmlFor:"image",children:"Your thumbnail"}),(0,S.jsx)(w.U,{name:"image",imageURL:re,progress:ae,minHeight:"600px",onChange:te,handleRemoveImage:ee})]})}),(0,S.jsxs)("div",{className:"grid grid-cols-2 mb-10 gap-x-10",children:[(0,S.jsxs)(g.g,{children:[(0,S.jsx)(v.__,{required:!0,htmlFor:"status",children:"Status"}),(0,S.jsxs)(g.v,{children:[(0,S.jsx)(b.Y,{name:"status",control:J,checked:M===N.cf.APPROVED,value:N.cf.APPROVED,children:"Approved"}),(0,S.jsx)(b.Y,{name:"status",control:J,checked:M===N.cf.PENDING,value:N.cf.PENDING,children:"Pending"}),(0,S.jsx)(b.Y,{name:"status",control:J,checked:M===N.cf.REJECTED,value:N.cf.REJECTED,children:"Reject"})]})]}),(0,S.jsxs)(g.g,{children:[(0,S.jsx)(v.__,{htmlFor:"popular",children:"Popular post"}),(0,S.jsx)(j.Z,{name:"popular",on:!0===W,onClick:function(){return B("popular",!W)}})]})]}),(0,S.jsx)(m.z,{type:"submit",className:"mx-auto",disabled:Q,isLoading:Q,children:"Update your post"})]})]}):null}}}]);
//# sourceMappingURL=673.e017fb74.chunk.js.map