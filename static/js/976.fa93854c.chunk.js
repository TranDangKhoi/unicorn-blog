"use strict";(self.webpackChunkunicorn_blog=self.webpackChunkunicorn_blog||[]).push([[976],{7963:function(e,r,n){n.d(r,{f:function(){return t}});var t="https://api.imgbb.com/1/upload?key=3c83bf0d94037028b0b4041a18bcb093"},1023:function(e,r,n){n.d(r,{L:function(){return h}});var t=n(1413),s=n(4925),a=n(885),o=n(2791),i=n(184),c=(0,o.createContext)();function l(e){var r=(0,o.useState)(!1),n=(0,a.Z)(r,2),s=n[0],l=n[1],u={show:s,setShow:l,handleToggleDropdown:function(){l(!s)}};return(0,i.jsx)(c.Provider,(0,t.Z)((0,t.Z)({value:u},e),{},{children:e.children}))}function u(){var e=(0,o.useContext)(c);if("undefined"===typeof e)throw new Error("useDropdown must be used within DropdownProvider");return e}var d=["children"],h=function(e){var r=e.children,n=(0,s.Z)(e,d);return(0,i.jsx)(l,(0,t.Z)((0,t.Z)({},n),{},{children:(0,i.jsx)("div",{className:"relative inline-block w-full",children:r})}))},p=function(e){var r=e.onClick,n=u().setShow;return(0,i.jsx)("div",{className:"py-[15px] px-[25px] transition-all border-l-4 border-l-transparent cursor-pointer flex items-center justify-between hover:text-primary hover:border-l-primary",onClick:function(){r&&r(),n(!1)},children:e.children})},f=["placeholder"],m=function(e){var r=e.placeholder,n=(0,s.Z)(e,f),a=u().onChange;return(0,i.jsx)("div",{className:"p-2",children:(0,i.jsx)("input",(0,t.Z)({type:"text",placeholder:r,className:"w-full p-4 border border-gray-200 rounded outline-none",onChange:a},n))})},x=n(950),g=function(e){var r=e.placeholder,n=void 0===r?"Please select an category":r,t=e.className,s=void 0===t?"":t,a=u(),o=a.show,c=a.handleToggleDropdown;return(0,i.jsxs)("div",{className:"".concat(s," py-[15px] rounded-lg border border-gray-200 px-[25px] cursor-pointer flex items-center justify-between"),onClick:c,children:[(0,i.jsx)("span",{children:n}),(0,i.jsx)("span",{children:o?(0,i.jsx)(x.Cz,{}):(0,i.jsx)(x.BD,{})})]})},v=function(e){var r=e.children,n=u().show;return(0,i.jsx)(i.Fragment,{children:n&&(0,i.jsx)("div",{className:"absolute left-0 z-20 w-full bg-white border border-gray-200 shadow-sm border-t-transparent top-full",children:r})})};h.Option=p,h.Search=m,h.Select=g,h.List=v},4762:function(e,r,n){n.d(r,{Y:function(){return c}});var t=n(1413),s=n(4925),a=(n(2791),n(1134)),o=n(184),i=["checked","children","control","name"],c=function(e){var r=e.checked,n=e.children,c=e.control,l=e.name,u=(0,s.Z)(e,i),d=(0,a.bc)({control:c,name:l,defaultValue:""}).field;return(0,o.jsxs)("label",{children:[(0,o.jsx)("input",(0,t.Z)((0,t.Z)({checked:r,type:"radio",className:"hidden-input"},d),u)),(0,o.jsxs)("div",{className:"flex items-center font-medium cursor-pointer gap-x-3",children:[(0,o.jsx)("div",{className:"w-7 h-7 rounded-full border flex items-center justify-center p-1  ".concat(r?"bg-primary border-primary text-white":"border-gray-300 border-2 text-transparent"),children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}),(0,o.jsx)("span",{children:n})]})]})}},7050:function(e,r,n){n.d(r,{Z:function(){return i}});var t=n(1413),s=n(4925),a=(n(2791),n(184)),o=["name","on","onClick"],i=function(e){var r=e.name,n=e.on,i=e.onClick,c=(0,s.Z)(e,o);return(0,a.jsxs)("label",{children:[(0,a.jsx)("input",{type:"checkbox",name:r,id:r,checked:n,onClick:i,className:"hidden-input",onChange:function(){}}),(0,a.jsx)("div",(0,t.Z)((0,t.Z)({className:"inline-block w-[100px] h-[52px] relative cursor-pointer rounded-full p-1 transition-all ".concat(n?"bg-primary":"bg-gray-300")},c),{},{children:(0,a.jsx)("span",{className:"transition-all w-11 h-11 bg-white rounded-full inline-block ".concat(n?"translate-x-[48px]":"")})}))]})}},6976:function(e,r,n){n.r(r);var t=n(4165),s=n(1413),a=n(5861),o=n(885),i=n(4695),c=n(7963),l=n(1044),u=n(3951),d=n(1023),h=n(8654),p=n(5510),f=n(2112),m=n(4762),x=n(7050),g=n(5593),v=n(9808),b=n(1199),j=n(9062),w=n(3663),y=n(6524),Z=(n(6009),n(8113)),k=n(2791),C=n(1134),N=n(6770),S=n.n(N),E=n(9085),L=n(123),D=n(333),P=n.n(D),I=n(1830),R=n.n(I),U=n(3585),_=n(184);N.Quill.register("modules/imageUploader",Z.Z);r.default=function(){var e=(0,v.a)().userInfo,r=(0,k.useState)(""),n=(0,o.Z)(r,2),Z=n[0],N=n[1],D=(0,C.cI)({mode:"onSubmit",defaultValues:{title:"",slug:"",status:2,category:{},user:{},popular:!1},resolver:(0,i.X)(L.vN)}),I=D.control,T=D.reset,A=D.watch,F=D.setValue,B=D.handleSubmit,O=D.getValues,Y=D.formState,q=Y.isSubmitting,J=Y.errors;(0,k.useEffect)((function(){function e(){return(e=(0,a.Z)((0,t.Z)().mark((function e(){var r,n;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,j.JU)(b.db,"users",b.I.currentUser.uid),e.next=3,(0,j.QT)(r);case 3:n=e.sent,F("user",(0,s.Z)({id:n.id},n.data()));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[F,e.uid]);var V=(0,w.Z)(F,O),z=V.imageURL,Q=V.progress,G=V.handleResetUploadAfterSubmit,H=V.handleRemoveImage,M=V.handleSelectImage,W=(0,k.useState)([]),X=(0,o.Z)(W,2),K=X[0],$=X[1],ee=(0,k.useState)(""),re=(0,o.Z)(ee,2),ne=re[0],te=re[1],se=A("popular"),ae=Number(A("status")),oe=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(r){var n,o;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=(0,s.Z)({},r)).slug=P()(n.slug||n.title,{lower:!0}),n.status=Number(r.status),o=(0,j.hJ)(b.db,"posts"),e.next=6,R().fire({title:"Are you sure you want to post this into your blog?",text:"Feel free to re-check your contents!",icon:"question",showCancelButton:!0,confirmButtonColor:"#1DC071",cancelButtonColor:"#d33",cancelButtonText:"Wait, don't post this yet",confirmButtonText:"Confirm, i want to post this"}).then(function(){var e=(0,a.Z)((0,t.Z)().mark((function e(a){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.isConfirmed){e.next=10;break}return e.next=3,(0,j.ET)(o,(0,s.Z)((0,s.Z)({},n),{},{slug:P()(r.title,{lower:!0}),content:Z,imageURL:z,categoryId:n.category.id,userId:b.I.currentUser.uid,createdAt:(0,j.Bt)()}));case 3:E.Am.success("Your blog has been posted successfully"),R().fire({title:"Success!",text:"You can view your blog in the dashboard now"}),T({title:"",slug:P()(r.title,{lower:!0}),status:2,category:{},content:"",imageURL:"",popular:!1,user:{}}),G(),te({}),e.next=11;break;case 10:a.dismiss===R().DismissReason.cancel&&R().fire({icon:"success",iconColor:"#1DC071",title:"You're safe!",text:"Cancelled"});case 11:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}());case 6:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),ie=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(r){var n,a;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,j.JU)(b.db,"categories",r.id),e.next=3,(0,j.QT)(n);case 3:a=e.sent,F("category",(0,s.Z)({id:a.id},a.data())),te(r);case 6:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();(0,k.useEffect)((function(){function e(){return(e=(0,a.Z)((0,t.Z)().mark((function e(){var r,n,a,o;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,j.hJ)(b.db,"categories"),n=(0,j.IO)(r,(0,j.ar)("status","==",1)),e.next=4,(0,j.PL)(n);case 4:a=e.sent,o=[],a.forEach((function(e){o.push((0,s.Z)({id:e.id},e.data()))})),$(o);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),(0,k.useEffect)((function(){var e,r=Object.values(J);r.length>0&&(E.Am.dismiss(r.find((function(e){return 0===e}))),E.Am.error(null===(e=r[0])||void 0===e?void 0:e.message,{pauseOnHover:!0,closeOnClick:!0}))}),[J]);var ce=(0,k.useMemo)((function(){return{toolbar:[["bold","italic","underline","strike"],["blockquote"],[{align:""},{align:"center"},{align:"right"},{align:"justify"}],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{header:[1,2,3,4,!1]}],["clean"],["image"]],imageUploader:{upload:function(){var e=(0,a.Z)((0,t.Z)().mark((function e(r){var n,s;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("image",r),e.next=4,(0,l.ZP)({method:"post",url:c.f,data:n,headers:{"Content-Type":"multipart/form-data"}});case 4:return s=e.sent,e.abrupt("return",s.data.data.url);case 6:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()}}}),[]);return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(y.Z,{title:"Add new post",desc:"Share your stories with us ^o^"}),(0,_.jsxs)("form",{className:"mt-10 form-layout",onSubmit:B(oe),children:[(0,_.jsxs)("div",{className:"grid grid-cols-2 mb-10 gap-x-10",children:[(0,_.jsxs)(h.g,{children:[(0,_.jsx)(f.__,{required:!0,htmlFor:"title",children:"Title"}),(0,_.jsx)(p.I,{control:I,placeholder:"Enter your title",name:"title"})]}),(0,_.jsxs)(h.g,{children:[(0,_.jsx)(f.__,{required:!0,htmlFor:"category",children:"Category"}),(0,_.jsxs)(d.L,{children:[(0,_.jsx)(d.L.Select,{}),(0,_.jsx)(d.L.List,{children:K.length>0&&K.map((function(e){return(0,_.jsx)(d.L.Option,{onClick:function(){return ie(e)},children:e.name},e.id)}))})]}),(null===ne||void 0===ne?void 0:ne.name)&&(0,_.jsx)("span",{className:"inline-block p-4 text-sm font-semibold text-white rounded-lg bg-primary",children:null===ne||void 0===ne?void 0:ne.name})]})]}),(0,_.jsx)("div",{className:"w-full mb-10",children:(0,_.jsx)(S(),{modules:ce,theme:"snow",value:Z,onChange:N})}),(0,_.jsx)("div",{className:"w-full h-full mb-10",children:(0,_.jsxs)(h.g,{children:[(0,_.jsx)(f.__,{required:!0,htmlFor:"image",children:"Your thumbnail"}),(0,_.jsx)(g.U,{name:"image",imageURL:z,progress:Q,minHeight:"600px",onChange:M,handleRemoveImage:H})]})}),(0,_.jsxs)("div",{className:"grid grid-cols-2 mb-10 gap-x-10",children:[(0,_.jsxs)(h.g,{children:[(0,_.jsx)(f.__,{required:!0,htmlFor:"status",children:"Status"}),(0,_.jsxs)(h.v,{children:[(0,_.jsx)(m.Y,{name:"status",control:I,checked:ae===U.cf.APPROVED,value:U.cf.APPROVED,children:"Approved"}),(0,_.jsx)(m.Y,{name:"status",control:I,checked:ae===U.cf.PENDING,value:U.cf.PENDING,children:"Pending"}),(0,_.jsx)(m.Y,{name:"status",control:I,checked:ae===U.cf.REJECTED,value:U.cf.REJECTED,children:"Reject"})]})]}),(0,_.jsxs)(h.g,{children:[(0,_.jsx)(f.__,{htmlFor:"popular",children:"Popular post"}),(0,_.jsx)(x.Z,{name:"popular",on:!0===se,onClick:function(){return F("popular",!se)}})]})]}),(0,_.jsx)(u.z,{type:"submit",className:"mx-auto",disabled:q,isLoading:q,children:"Publish"})]})]})}}}]);
//# sourceMappingURL=976.fa93854c.chunk.js.map