"use strict";(self.webpackChunkunicorn_blog=self.webpackChunkunicorn_blog||[]).push([[132],{4762:function(e,r,n){n.d(r,{Y:function(){return l}});var s=n(1413),a=n(4925),t=(n(2791),n(1134)),o=n(184),c=["checked","children","control","name"],l=function(e){var r=e.checked,n=e.children,l=e.control,i=e.name,u=(0,a.Z)(e,c),d=(0,t.bc)({control:l,name:i,defaultValue:""}).field;return(0,o.jsxs)("label",{children:[(0,o.jsx)("input",(0,s.Z)((0,s.Z)({checked:r,type:"radio",className:"hidden-input"},d),u)),(0,o.jsxs)("div",{className:"flex items-center font-medium cursor-pointer gap-x-3",children:[(0,o.jsx)("div",{className:"w-7 h-7 rounded-full border flex items-center justify-center p-1  ".concat(r?"bg-primary border-primary text-white":"border-gray-300 border-2 text-transparent"),children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}),(0,o.jsx)("span",{children:n})]})]})}},5132:function(e,r,n){n.r(r);var s=n(4165),a=n(5861),t=n(4695),o=n(3951),c=n(8654),l=n(5510),i=n(2112),u=n(4762),d=n(5593),m=n(9808),h=n(1199),x=n(3002),v=n(9062),p=n(3663),f=n(6524),j=n(2791),w=n(1134),g=n(9085),b=n(123),C=n(333),N=n.n(C),k=n(1830),y=n.n(k),A=n(3585),Z=n(184);r.default=function(){var e=(0,m.a)().userInfo,r=(0,w.cI)({mode:"onChange",defaultValues:{username:"",avatar:"",email:"",password:"",createdAt:new Date,status:A.iQ.ACTIVE,role:A.xZ.USER},resolver:(0,t.X)(b.hu)}),n=r.control,C=r.reset,k=r.getValues,I=r.setValue,E=r.watch,D=r.handleSubmit,B=r.formState,R=B.isSubmitting,S=B.errors,U=Number(E("status")),_=Number(E("role")),M=(0,p.Z)(I,k),Q=M.imageURL,V=M.progress,L=M.handleResetUploadAfterSubmit,T=M.handleRemoveImage,Y=M.handleSelectImage;(0,j.useEffect)((function(){var e,r=Object.values(S);r.length>0&&(g.Am.dismiss(r.find((function(e){return 0===e}))),g.Am.error(null===(e=r[0])||void 0===e?void 0:e.message,{pauseOnHover:!0,closeOnClick:!0}))}),[S]);var O=function(){var e=(0,a.Z)((0,s.Z)().mark((function e(r){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y().fire({title:"Are you sure you want to create this user?",html:"\n      <div>Username: ".concat(r.username,"</div>\n      <div>E-mail address: ").concat(r.email,"</div>\n      <div>Password: ").concat(r.password,"</div>\n      <div>Status: ").concat(r.status,"</div>\n      <div>Role: ").concat(r.role,"</div>\n      "),icon:"question",showConfirmButton:!0,confirmButtonText:"Confirm",confirmButtonColor:"#1DC071",showCancelButton:!0,cancelButtonColor:"#d33",cancelButtonText:"No, cancel!"}).then(function(){var e=(0,a.Z)((0,s.Z)().mark((function e(n){var a;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.isConfirmed){e.next=19;break}return e.prev=1,e.next=4,(0,x.Xb)(h.I,r.email,r.password);case 4:return a=e.sent,e.next=7,(0,x.ck)(h.I.currentUser,{displayName:r.username,photoURL:"https://ui-avatars.com/api/?background=random&name=".concat(r.username)});case 7:return e.next=9,(0,v.ET)((0,v.hJ)(h.db,"users"),{username:r.username,avatar:"https://ui-avatars.com/api/?background=random&name=".concat(r.username),email:r.email,password:r.password,createdAt:(0,v.Bt)(),status:Number(r.status),role:Number(r.role),userId:a.user.uid,usernameSlug:N()(r.username,{lower:!0})});case 9:C({username:"",avatar:"",email:"",password:"",createdAt:new Date,status:A.iQ.ACTIVE,role:A.xZ.USER}),y().fire({icon:"success",iconColor:"#1DC071",title:"Created user successfully",timer:1500,showConfirmButton:!1}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),g.Am.error("Failed to create new user",{autoClose:1500}),console.log(e.t0);case 17:e.next=20;break;case 19:n.dismiss===y().DismissReason.cancel&&y().fire({icon:"success",iconColor:"#1DC071",title:"Cancelled creating user successfully",timer:1500,showConfirmButton:!1});case 20:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(r){return e.apply(this,arguments)}}()),L();case 2:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();return(null===e||void 0===e?void 0:e.role)!==A.xZ.ADMIN&&(null===e||void 0===e?void 0:e.role)!==A.xZ.MOD?null:(0,Z.jsxs)("div",{children:[(0,Z.jsx)(f.Z,{title:"New user",desc:"Add new user to system"}),(0,Z.jsxs)("form",{onSubmit:D(O),children:[(0,Z.jsx)("div",{className:"w-[250px] h-[250px] mx-auto rounded-full mb-10",children:(0,Z.jsx)(d.U,{name:"image",className:"h-full rounded-full",onChange:Y,handleRemoveImage:T,scrollable:!1,centeredCloseIcon:!0,imageURL:Q,progress:V})}),(0,Z.jsx)("div",{className:"form-layout",children:(0,Z.jsxs)(c.g,{children:[(0,Z.jsx)(i.__,{children:"Username"}),(0,Z.jsx)(l.I,{name:"username",placeholder:"Enter your username",control:n})]})}),(0,Z.jsxs)("div",{className:"form-layout",children:[(0,Z.jsxs)(c.g,{children:[(0,Z.jsx)(i.__,{children:"Email"}),(0,Z.jsx)(l.I,{name:"email",placeholder:"Enter your email address",control:n,type:"email"})]}),(0,Z.jsxs)(c.g,{children:[(0,Z.jsx)(i.__,{children:"Password"}),(0,Z.jsx)(l.C,{name:"password",placeholder:"Enter your password",control:n,type:"password"})]})]}),(0,Z.jsxs)("div",{className:"form-layout",children:[(0,Z.jsxs)(c.g,{children:[(0,Z.jsx)(i.__,{children:"Status"}),(0,Z.jsxs)(c.v,{children:[(0,Z.jsx)(u.Y,{name:"status",control:n,checked:U===A.iQ.ACTIVE,value:A.iQ.ACTIVE,children:"Active"}),(0,Z.jsx)(u.Y,{name:"status",control:n,checked:U===A.iQ.PENDING,value:A.iQ.PENDING,children:"Pending"}),(0,Z.jsx)(u.Y,{name:"status",control:n,checked:U===A.iQ.BANNED,value:A.iQ.BANNED,children:"Banned"})]})]}),(0,Z.jsxs)(c.g,{children:[(0,Z.jsx)(i.__,{children:"Role"}),(0,Z.jsxs)(c.v,{children:[(0,Z.jsx)(u.Y,{name:"role",control:n,checked:_===A.xZ.ADMIN,value:A.xZ.ADMIN,children:"Admin"}),(0,Z.jsx)(u.Y,{name:"role",control:n,checked:_===A.xZ.MOD,value:A.xZ.MOD,children:"Moderator"}),(0,Z.jsx)(u.Y,{name:"role",control:n,checked:_===A.xZ.USER,value:A.xZ.USER,children:"User"})]})]})]}),(0,Z.jsx)(o.z,{kind:"primary",type:"submit",isLoading:R,disabled:R,className:"mx-auto w-[200px]",children:"Add new user"})]})]})}}}]);
//# sourceMappingURL=132.7efa8d56.chunk.js.map