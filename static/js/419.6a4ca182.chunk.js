"use strict";(self.webpackChunkunicorn_blog=self.webpackChunkunicorn_blog||[]).push([[419],{4762:function(e,n,r){r.d(n,{Y:function(){return l}});var t=r(1413),s=r(4925),a=(r(2791),r(1134)),o=r(184),c=["checked","children","control","name"],l=function(e){var n=e.checked,r=e.children,l=e.control,i=e.name,u=(0,s.Z)(e,c),d=(0,a.bc)({control:l,name:i,defaultValue:""}).field;return(0,o.jsxs)("label",{children:[(0,o.jsx)("input",(0,t.Z)((0,t.Z)({checked:n,type:"radio",className:"hidden-input"},d),u)),(0,o.jsxs)("div",{className:"flex items-center font-medium cursor-pointer gap-x-3",children:[(0,o.jsx)("div",{className:"w-7 h-7 rounded-full border flex items-center justify-center p-1  ".concat(n?"bg-primary border-primary text-white":"border-gray-300 border-2 text-transparent"),children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}),(0,o.jsx)("span",{children:r})]})]})}},9419:function(e,n,r){r.r(n),r.d(n,{default:function(){return D}});var t,s=r(1413),a=r(4165),o=r(5861),c=r(885),l=r(4695),i=r(3951),u=r(8654),d=r(5510),m=r(2112),h=r(4762),x=r(4925),p=r(168),f=r(2791),v=r(1134),g=r(6444),b=r(184),j=["name","type","children","control"],k=g.ZP.div(t||(t=(0,p.Z)(["\n  position: relative;\n  width: 100%;\n  textarea {\n    user-select: none;\n    font-weight: 500;\n    padding: 16px 20px;\n    background: ",";\n    width: 100%;\n    border-radius: 8px;\n    transition: all 150ms ease-in-out;\n    border: 2px solid transparent;\n    resize: none;\n    min-height: 300px;\n    &:focus {\n      background-size: white;\n      border-color: ",";\n    }\n    &::placeholder {\n      color: #84878b;\n    }\n    &::-webkit-input-placeholder {\n      color: #84878b;\n    }\n    &::-moz-input-placeholder {\n      color: #84878b;\n    }\n  }\n"])),(function(e){return e.theme.grayLight}),(function(e){return e.theme.primary})),Z=function(e){var n=e.name,r=void 0===n?"":n,t=e.type,a=void 0===t?"text":t,o=e.children,c=e.control,l=(0,x.Z)(e,j),i=(0,v.bc)({control:c,name:r,defaultValue:""}).field;return(0,b.jsx)(k,{hasIcon:!!o,children:(0,b.jsx)("textarea",(0,s.Z)((0,s.Z)({type:a,id:r},i),l))})},w=r(5593),y=r(1199),N=r(9062),I=r(3663),E=r(6524),U=r(1087),A=r(7689),_=r(9085),S=r(123),C=r(333),Q=r.n(C),V=r(3585),D=function(){var e=(0,U.lr)(),n=(0,c.Z)(e,1)[0],r=(0,A.s0)(),t=(0,v.cI)({mode:"onSubmit",defaultValues:{status:V.iQ.ACTIVE},resolver:(0,l.X)(S.gV)}),x=t.control,p=t.reset,g=t.watch,j=t.handleSubmit,k=t.setValue,C=t.getValues,D=t.formState,L=D.errors,R=D.isSubmitting,Y=n.get("userId"),M=Number(g("status")),O=Number(g("role")),B=C("avatar"),T=/%2F(\S+)\?/gm.exec(B),z=(null===T||void 0===T?void 0:T.length)>0?T[1]:"",P=(0,I.Z)(k,C,z,(function(){return q.apply(this,arguments)})),J=P.handleRemoveImage,G=P.setImageURL,F=P.imageURL,H=P.handleSelectImage,W=P.progress;(0,f.useEffect)((function(){function e(){return(e=(0,o.Z)((0,a.Z)().mark((function e(){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Y){e.next=2;break}return e.abrupt("return");case 2:return n=(0,N.JU)(y.db,"users",Y),e.next=5,(0,N.QT)(n).then((function(e){p(e.data())}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[Y,p]),(0,f.useEffect)((function(){var e,n=Object.values(L);n.length>0&&(_.Am.dismiss(n.find((function(e){return 0===e}))),_.Am.error(null===(e=n[0])||void 0===e?void 0:e.message,{pauseOnHover:!0,closeOnClick:!0}))}),[L]);var X=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(n){var t,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,s.Z)({},n),o=(0,N.JU)(y.db,"users",Y),e.prev=2,e.next=5,(0,N.r7)(o,(0,s.Z)((0,s.Z)({},t),{},{avatar:F,usernameSlug:Q()(t.username,{lower:!0}),status:Number(t.status),role:Number(t.role)}));case 5:_.Am.success("Update user successfully",{closeOnClick:!0}),r("/manage/user"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(n){return e.apply(this,arguments)}}();function q(){return(q=(0,o.Z)((0,a.Z)().mark((function e(){var n,r,t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,N.JU)(y.db,"users",Y),e.next=3,(0,N.QT)(n);case 3:return r=e.sent,t=r.data(),e.next=7,(0,N.r7)(n,{avatar:"https://ui-avatars.com/api/?background=random&name=".concat(t.username)});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,f.useEffect)((function(){G(B)}),[B,G]),Y?(0,b.jsxs)("div",{children:[(0,b.jsx)(E.Z,{title:"Update user",desc:"Update user's information"}),(0,b.jsxs)("form",{onSubmit:j(X),children:[(0,b.jsx)("div",{className:"w-[250px] h-[250px] mx-auto rounded-full mb-10",children:(0,b.jsx)(w.U,{name:"image",className:"h-full rounded-full",onChange:H,handleRemoveImage:J,scrollable:!1,centeredCloseIcon:!0,imageURL:F,progress:W})}),(0,b.jsxs)("div",{className:"form-layout-2",children:[(0,b.jsxs)(u.g,{children:[(0,b.jsx)(m.__,{children:"Username"}),(0,b.jsx)(d.I,{name:"username",placeholder:"Enter your username",control:x})]}),(0,b.jsxs)(u.g,{children:[(0,b.jsx)(m.__,{children:"Email"}),(0,b.jsx)(d.I,{name:"email",placeholder:"Enter your email address",control:x,type:"email"})]})]}),(0,b.jsx)("div",{className:"form-layout",children:(0,b.jsxs)(u.g,{children:[(0,b.jsx)(m.__,{children:"Bio"}),(0,b.jsx)(Z,{name:"bio",placeholder:"Enter your bio",control:x})]})}),(0,b.jsxs)("div",{className:"form-layout",children:[(0,b.jsxs)(u.g,{children:[(0,b.jsx)(m.__,{children:"Status"}),(0,b.jsxs)(u.v,{children:[(0,b.jsx)(h.Y,{name:"status",control:x,checked:M===V.iQ.ACTIVE,value:V.iQ.ACTIVE,children:"Active"}),(0,b.jsx)(h.Y,{name:"status",control:x,checked:M===V.iQ.PENDING,value:V.iQ.PENDING,children:"Pending"}),(0,b.jsx)(h.Y,{name:"status",control:x,checked:M===V.iQ.BANNED,value:V.iQ.BANNED,children:"Banned"})]})]}),(0,b.jsxs)(u.g,{children:[(0,b.jsx)(m.__,{children:"Role"}),(0,b.jsxs)(u.v,{children:[(0,b.jsx)(h.Y,{name:"role",control:x,checked:O===V.xZ.ADMIN,value:V.xZ.ADMIN,children:"Admin"}),(0,b.jsx)(h.Y,{name:"role",control:x,checked:O===V.xZ.MOD,value:V.xZ.MOD,children:"Moderator"}),(0,b.jsx)(h.Y,{name:"role",control:x,checked:O===V.xZ.USER,value:V.xZ.USER,children:"User"})]})]})]}),(0,b.jsx)(i.z,{kind:"primary",type:"submit",isLoading:R,disabled:R,className:"mx-auto w-[200px]",children:"Update user"})]})]}):null}}}]);
//# sourceMappingURL=419.6a4ca182.chunk.js.map