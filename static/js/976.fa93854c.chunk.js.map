{"version":3,"file":"static/js/976.fa93854c.chunk.js","mappings":"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","sources":["api-config.js","contexts/dropdown-context.js","components/Dropdown/Dropdown.js","components/Dropdown/Option.js","components/Dropdown/Search.js","components/Dropdown/Select.js","components/Dropdown/List.js","components/Dropdown/index.js","components/Radio/Radio.js","components/Toggle/Toggle.js","module/Post/PostAddNew.js"],"sourcesContent":["export const imgbbAPI =\r\n  \"https://api.imgbb.com/1/upload?key=3c83bf0d94037028b0b4041a18bcb093\";\r\n","import { createContext, useContext, useState } from \"react\";\r\n\r\nconst DropdownContext = createContext();\r\nfunction DropdownProvider(props) {\r\n  const [show, setShow] = useState(false);\r\n  const handleToggleDropdown = () => {\r\n    setShow(!show);\r\n  };\r\n  const value = {\r\n    show,\r\n    setShow,\r\n    handleToggleDropdown,\r\n  };\r\n  return (\r\n    <DropdownContext.Provider value={value} {...props}>\r\n      {props.children}\r\n    </DropdownContext.Provider>\r\n  );\r\n}\r\nfunction useDropdown() {\r\n  const context = useContext(DropdownContext);\r\n  if (typeof context === \"undefined\")\r\n    throw new Error(\"useDropdown must be used within DropdownProvider\");\r\n  return context;\r\n}\r\nexport { useDropdown, DropdownProvider };\r\n","import { DropdownProvider } from \"contexts/dropdown-context\";\r\nimport React from \"react\";\r\n\r\nconst Dropdown = ({ children, ...props }) => {\r\n  return (\r\n    <DropdownProvider {...props}>\r\n      <div className=\"relative inline-block w-full\">{children}</div>\r\n    </DropdownProvider>\r\n  );\r\n};\r\n\r\nexport default Dropdown;\r\n","import { useDropdown } from \"contexts/dropdown-context\";\r\nimport React from \"react\";\r\n\r\nconst Option = (props) => {\r\n  const { onClick } = props;\r\n  const { setShow } = useDropdown();\r\n  const handleClick = () => {\r\n    onClick && onClick();\r\n    setShow(false);\r\n  };\r\n  return (\r\n    <div\r\n      className=\"py-[15px] px-[25px] transition-all border-l-4 border-l-transparent cursor-pointer flex items-center justify-between hover:text-primary hover:border-l-primary\"\r\n      onClick={handleClick}\r\n    >\r\n      {props.children}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Option;\r\n","import { useDropdown } from \"contexts/dropdown-context\";\r\nimport React from \"react\";\r\n\r\nconst Search = ({ placeholder, ...props }) => {\r\n  const { onChange } = useDropdown();\r\n  return (\r\n    <div className=\"p-2\">\r\n      <input\r\n        type=\"text\"\r\n        placeholder={placeholder}\r\n        className=\"w-full p-4 border border-gray-200 rounded outline-none\"\r\n        onChange={onChange}\r\n        {...props}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Search;\r\n","import { IconArrowDown, IconArrowUp } from \"components/Icon\";\r\nimport { useDropdown } from \"contexts/dropdown-context\";\r\nimport React from \"react\";\r\n\r\nconst Select = ({\r\n  placeholder = \"Please select an category\",\r\n  className = \"\",\r\n}) => {\r\n  const { show, handleToggleDropdown } = useDropdown();\r\n  return (\r\n    <div\r\n      className={`${className} py-[15px] rounded-lg border border-gray-200 px-[25px] cursor-pointer flex items-center justify-between`}\r\n      onClick={handleToggleDropdown}\r\n    >\r\n      <span>{placeholder}</span>\r\n      <span>\r\n        {show ? <IconArrowUp></IconArrowUp> : <IconArrowDown></IconArrowDown>}\r\n      </span>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Select;\r\n","import { useDropdown } from \"contexts/dropdown-context\";\r\nimport React from \"react\";\r\n\r\nconst List = ({ children }) => {\r\n  const { show } = useDropdown();\r\n  return (\r\n    <>\r\n      {show && (\r\n        <div className=\"absolute left-0 z-20 w-full bg-white border border-gray-200 shadow-sm border-t-transparent top-full\">\r\n          {children}\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default List;\r\n","import Dropdown from \"./Dropdown\";\r\nimport Option from \"./Option\";\r\nimport Search from \"./Search\";\r\nimport Select from \"./Select\";\r\nimport List from \"./List\";\r\n\r\nDropdown.Option = Option;\r\nDropdown.Search = Search;\r\nDropdown.Select = Select;\r\nDropdown.List = List;\r\n\r\nexport { Dropdown };\r\n","import React from \"react\";\r\nimport { useController } from \"react-hook-form\";\r\n\r\nconst Radio = ({ checked, children, control, name, ...props }) => {\r\n  const { field } = useController({\r\n    control,\r\n    name,\r\n    defaultValue: \"\",\r\n  });\r\n  return (\r\n    <label>\r\n      <input\r\n        checked={checked}\r\n        type=\"radio\"\r\n        className=\"hidden-input\"\r\n        {...field}\r\n        {...props}\r\n      />\r\n      <div className=\"flex items-center font-medium cursor-pointer gap-x-3\">\r\n        <div\r\n          className={`w-7 h-7 rounded-full border flex items-center justify-center p-1  ${\r\n            checked\r\n              ? \"bg-primary border-primary text-white\"\r\n              : \"border-gray-300 border-2 text-transparent\"\r\n          }`}\r\n        >\r\n          <svg\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            className=\"w-6 h-6\"\r\n            fill=\"none\"\r\n            viewBox=\"0 0 24 24\"\r\n            stroke=\"currentColor\"\r\n            strokeWidth=\"2\"\r\n          >\r\n            <path\r\n              strokeLinecap=\"round\"\r\n              strokeLinejoin=\"round\"\r\n              d=\"M5 13l4 4L19 7\"\r\n            />\r\n          </svg>\r\n        </div>\r\n        <span>{children}</span>\r\n      </div>\r\n    </label>\r\n  );\r\n};\r\n\r\nexport default Radio;\r\n","import React from \"react\";\r\n\r\nconst Toggle = ({ name, on, onClick, ...rest }) => {\r\n  return (\r\n    <label>\r\n      <input\r\n        type=\"checkbox\"\r\n        name={name}\r\n        id={name}\r\n        checked={on}\r\n        onClick={onClick}\r\n        className=\"hidden-input\"\r\n        onChange={() => {}}\r\n      />\r\n      <div\r\n        className={`inline-block w-[100px] h-[52px] relative cursor-pointer rounded-full p-1 transition-all ${\r\n          on ? \"bg-primary\" : \"bg-gray-300\"\r\n        }`}\r\n        {...rest}\r\n      >\r\n        <span\r\n          className={`transition-all w-11 h-11 bg-white rounded-full inline-block ${\r\n            on ? \"translate-x-[48px]\" : \"\"\r\n          }`}\r\n        ></span>\r\n      </div>\r\n    </label>\r\n  );\r\n};\r\n\r\nexport default Toggle;\r\n","import { yupResolver } from \"@hookform/resolvers/yup\";\r\nimport { imgbbAPI } from \"api-config\";\r\nimport axios from \"axios\";\r\nimport { Button } from \"components/Button\";\r\nimport { Dropdown } from \"components/Dropdown\";\r\nimport { Field, FieldCheckbox } from \"components/Field\";\r\nimport { Input } from \"components/Input\";\r\nimport { Label } from \"components/Label\";\r\nimport { Radio } from \"components/Radio\";\r\nimport { Toggle } from \"components/Toggle\";\r\nimport { ImageUpload } from \"components/Upload\";\r\nimport { useAuth } from \"contexts/auth-context\";\r\nimport { auth, db } from \"firebase-app/firebase-config\";\r\nimport {\r\n  addDoc,\r\n  collection,\r\n  doc,\r\n  getDoc,\r\n  getDocs,\r\n  query,\r\n  serverTimestamp,\r\n  where,\r\n} from \"firebase/firestore\";\r\nimport useFirebaseImage from \"hooks/useFirebaseImage\";\r\nimport DashboardHeading from \"module/Category/DashboardHeading\";\r\nimport \"react-quill/dist/quill.snow.css\";\r\n\r\nimport ImageUploader from \"quill-image-uploader\";\r\nimport { useEffect, useMemo, useState } from \"react\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport ReactQuill, { Quill } from \"react-quill\";\r\nimport { toast } from \"react-toastify\";\r\nimport { postAddNewSchema } from \"schema/schema\";\r\nimport slugify from \"slugify\";\r\nimport Swal from \"sweetalert2\";\r\nimport { postStatus } from \"utils/constants\";\r\nQuill.register(\"modules/imageUploader\", ImageUploader);\r\n\r\nconst PostAddNew = () => {\r\n  const { userInfo } = useAuth();\r\n  const [content, setContent] = useState(\"\");\r\n  const {\r\n    control,\r\n    reset,\r\n    watch,\r\n    setValue,\r\n    handleSubmit,\r\n    getValues,\r\n    formState: { isSubmitting, errors },\r\n  } = useForm({\r\n    mode: \"onSubmit\",\r\n    defaultValues: {\r\n      title: \"\",\r\n      slug: \"\",\r\n      status: 2,\r\n      category: {},\r\n      user: {},\r\n      popular: false,\r\n    },\r\n    resolver: yupResolver(postAddNewSchema),\r\n  });\r\n  useEffect(() => {\r\n    async function fetchUserData() {\r\n      const docRef = doc(db, \"users\", auth.currentUser.uid);\r\n      const docData = await getDoc(docRef);\r\n      setValue(\"user\", {\r\n        id: docData.id,\r\n        ...docData.data(),\r\n      });\r\n    }\r\n    fetchUserData();\r\n  }, [setValue, userInfo.uid]);\r\n  const {\r\n    imageURL,\r\n    progress,\r\n    handleResetUploadAfterSubmit,\r\n    handleRemoveImage,\r\n    handleSelectImage,\r\n  } = useFirebaseImage(setValue, getValues);\r\n  const [categories, setCategories] = useState([]);\r\n  const [selectCategory, setSelectCategory] = useState(\"\");\r\n  // Convert status sang number vì database trả dưới dạng number\r\n  const watchPopular = watch(\"popular\");\r\n  const watchStatus = Number(watch(\"status\"));\r\n  const handleAddPost = async (values) => {\r\n    const cloneValues = { ...values };\r\n    cloneValues.slug = slugify(cloneValues.slug || cloneValues.title, {\r\n      lower: true,\r\n    });\r\n    cloneValues.status = Number(values.status);\r\n    const colRef = collection(db, \"posts\");\r\n    await Swal.fire({\r\n      title: \"Are you sure you want to post this into your blog?\",\r\n      text: \"Feel free to re-check your contents!\",\r\n      icon: \"question\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#1DC071\",\r\n      cancelButtonColor: \"#d33\",\r\n      cancelButtonText: \"Wait, don't post this yet\",\r\n      confirmButtonText: \"Confirm, i want to post this\",\r\n    }).then(async (result) => {\r\n      if (result.isConfirmed) {\r\n        await addDoc(colRef, {\r\n          ...cloneValues,\r\n          slug: slugify(values.title, { lower: true }),\r\n          content,\r\n          imageURL,\r\n          categoryId: cloneValues.category.id,\r\n          userId: auth.currentUser.uid,\r\n          createdAt: serverTimestamp(),\r\n        });\r\n        toast.success(\"Your blog has been posted successfully\");\r\n        Swal.fire({\r\n          title: \"Success!\",\r\n          text: \"You can view your blog in the dashboard now\",\r\n        });\r\n        reset({\r\n          title: \"\",\r\n          slug: slugify(values.title, { lower: true }),\r\n          status: 2,\r\n          category: {},\r\n          content: \"\",\r\n          imageURL: \"\",\r\n          popular: false,\r\n          user: {},\r\n        });\r\n        handleResetUploadAfterSubmit();\r\n        setSelectCategory({});\r\n      } else if (result.dismiss === Swal.DismissReason.cancel) {\r\n        Swal.fire({\r\n          icon: \"success\",\r\n          iconColor: \"#1DC071\",\r\n          title: \"You're safe!\",\r\n          text: \"Cancelled\",\r\n        });\r\n      }\r\n    });\r\n  };\r\n\r\n  const handleSelectOption = async (item) => {\r\n    const docRef = doc(db, \"categories\", item.id);\r\n    const docData = await getDoc(docRef);\r\n    setValue(\"category\", {\r\n      id: docData.id,\r\n      ...docData.data(),\r\n    });\r\n    // setValue(\"categoryId\", item.id);\r\n    setSelectCategory(item);\r\n  };\r\n\r\n  useEffect(() => {\r\n    async function getCategories() {\r\n      const colRef = collection(db, \"categories\");\r\n      const q = query(colRef, where(\"status\", \"==\", 1));\r\n      const docs = await getDocs(q);\r\n      let yourCategories = [];\r\n      docs.forEach((doc) => {\r\n        yourCategories.push({\r\n          id: doc.id,\r\n          ...doc.data(),\r\n        });\r\n      });\r\n      setCategories(yourCategories);\r\n    }\r\n    getCategories();\r\n  }, []);\r\n  useEffect(() => {\r\n    const arrErrors = Object.values(errors);\r\n    if (arrErrors.length > 0) {\r\n      toast.dismiss(arrErrors.find((item) => item === 0));\r\n      toast.error(arrErrors[0]?.message, {\r\n        pauseOnHover: true,\r\n        closeOnClick: true,\r\n      });\r\n    }\r\n  }, [errors]);\r\n  const modules = useMemo(\r\n    () => ({\r\n      toolbar: [\r\n        [\"bold\", \"italic\", \"underline\", \"strike\"],\r\n        [\"blockquote\"],\r\n        [\r\n          { align: \"\" },\r\n          { align: \"center\" },\r\n          { align: \"right\" },\r\n          { align: \"justify\" },\r\n        ],\r\n        [{ header: 1 }, { header: 2 }], // custom button values\r\n        [{ list: \"ordered\" }, { list: \"bullet\" }],\r\n        [{ header: [1, 2, 3, 4, false] }],\r\n        [\"clean\"],\r\n        [(\"link\", \"image\")],\r\n      ],\r\n      imageUploader: {\r\n        upload: async (file) => {\r\n          const bodyFormData = new FormData();\r\n          bodyFormData.append(\"image\", file);\r\n          const response = await axios({\r\n            method: \"post\",\r\n            url: imgbbAPI,\r\n            data: bodyFormData,\r\n            headers: {\r\n              \"Content-Type\": \"multipart/form-data\",\r\n            },\r\n          });\r\n          return response.data.data.url;\r\n        },\r\n      },\r\n    }),\r\n    []\r\n  );\r\n  return (\r\n    <>\r\n      <DashboardHeading\r\n        title=\"Add new post\"\r\n        desc=\"Share your stories with us ^o^\"\r\n      ></DashboardHeading>\r\n      <form\r\n        className=\"mt-10 form-layout\"\r\n        onSubmit={handleSubmit(handleAddPost)}\r\n      >\r\n        <div className=\"grid grid-cols-2 mb-10 gap-x-10\">\r\n          <Field>\r\n            <Label required={true} htmlFor=\"title\">\r\n              Title\r\n            </Label>\r\n            <Input\r\n              control={control}\r\n              placeholder=\"Enter your title\"\r\n              name=\"title\"\r\n            ></Input>\r\n          </Field>\r\n\r\n          <Field>\r\n            <Label required={true} htmlFor=\"category\">\r\n              Category\r\n            </Label>\r\n            <Dropdown>\r\n              <Dropdown.Select></Dropdown.Select>\r\n              <Dropdown.List>\r\n                {categories.length > 0 &&\r\n                  categories.map((item) => (\r\n                    <Dropdown.Option\r\n                      onClick={() => handleSelectOption(item)}\r\n                      key={item.id}\r\n                    >\r\n                      {item.name}\r\n                    </Dropdown.Option>\r\n                  ))}\r\n              </Dropdown.List>\r\n            </Dropdown>\r\n            {selectCategory?.name && (\r\n              <span className=\"inline-block p-4 text-sm font-semibold text-white rounded-lg bg-primary\">\r\n                {selectCategory?.name}\r\n              </span>\r\n            )}\r\n          </Field>\r\n        </div>\r\n        <div className=\"w-full mb-10\">\r\n          <ReactQuill\r\n            modules={modules}\r\n            theme=\"snow\"\r\n            value={content}\r\n            onChange={setContent}\r\n          />\r\n        </div>\r\n        <div className=\"w-full h-full mb-10\">\r\n          <Field>\r\n            <Label required={true} htmlFor=\"image\">\r\n              Your thumbnail\r\n            </Label>\r\n            <ImageUpload\r\n              name=\"image\"\r\n              imageURL={imageURL}\r\n              progress={progress}\r\n              minHeight=\"600px\"\r\n              onChange={handleSelectImage}\r\n              handleRemoveImage={handleRemoveImage}\r\n            ></ImageUpload>\r\n          </Field>\r\n        </div>\r\n\r\n        <div className=\"grid grid-cols-2 mb-10 gap-x-10\">\r\n          <Field>\r\n            <Label required={true} htmlFor=\"status\">\r\n              Status\r\n            </Label>\r\n            <FieldCheckbox>\r\n              <Radio\r\n                name=\"status\"\r\n                control={control}\r\n                checked={watchStatus === postStatus.APPROVED}\r\n                value={postStatus.APPROVED}\r\n              >\r\n                Approved\r\n              </Radio>\r\n              <Radio\r\n                name=\"status\"\r\n                control={control}\r\n                checked={watchStatus === postStatus.PENDING}\r\n                value={postStatus.PENDING}\r\n              >\r\n                Pending\r\n              </Radio>\r\n              <Radio\r\n                name=\"status\"\r\n                control={control}\r\n                checked={watchStatus === postStatus.REJECTED}\r\n                value={postStatus.REJECTED}\r\n              >\r\n                Reject\r\n              </Radio>\r\n            </FieldCheckbox>\r\n          </Field>\r\n\r\n          <Field>\r\n            <Label htmlFor=\"popular\">Popular post</Label>\r\n            <Toggle\r\n              name=\"popular\"\r\n              on={watchPopular === true}\r\n              onClick={() => setValue(\"popular\", !watchPopular)}\r\n            ></Toggle>\r\n          </Field>\r\n        </div>\r\n        <Button\r\n          type=\"submit\"\r\n          className=\"mx-auto\"\r\n          disabled={isSubmitting}\r\n          isLoading={isSubmitting}\r\n        >\r\n          Publish\r\n        </Button>\r\n      </form>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default PostAddNew;\r\n"],"names":["imgbbAPI","DropdownContext","createContext","DropdownProvider","props","useState","show","setShow","value","handleToggleDropdown","Provider","children","useDropdown","context","useContext","Error","className","onClick","placeholder","onChange","type","Icon","Dropdown","Option","Search","Select","List","checked","control","name","field","useController","defaultValue","xmlns","fill","viewBox","stroke","strokeWidth","strokeLinecap","strokeLinejoin","d","on","rest","id","Quill","ImageUploader","userInfo","useAuth","content","setContent","useForm","mode","defaultValues","title","slug","status","category","user","popular","resolver","yupResolver","postAddNewSchema","reset","watch","setValue","handleSubmit","getValues","formState","isSubmitting","errors","useEffect","docRef","doc","db","auth","getDoc","docData","data","fetchUserData","uid","useFirebaseImage","imageURL","progress","handleResetUploadAfterSubmit","handleRemoveImage","handleSelectImage","categories","setCategories","selectCategory","setSelectCategory","watchPopular","watchStatus","Number","handleAddPost","values","cloneValues","slugify","lower","colRef","collection","Swal","text","icon","showCancelButton","confirmButtonColor","cancelButtonColor","cancelButtonText","confirmButtonText","then","result","isConfirmed","addDoc","categoryId","userId","createdAt","serverTimestamp","toast","dismiss","iconColor","handleSelectOption","item","q","query","where","getDocs","docs","yourCategories","forEach","push","getCategories","arrErrors","Object","length","find","message","pauseOnHover","closeOnClick","modules","useMemo","toolbar","align","header","list","imageUploader","upload","file","bodyFormData","FormData","append","axios","method","url","headers","response","desc","onSubmit","required","htmlFor","I","map","theme","minHeight","postStatus","disabled","isLoading"],"sourceRoot":""}