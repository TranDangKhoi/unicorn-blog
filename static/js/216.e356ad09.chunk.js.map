{"version":3,"file":"static/js/216.e356ad09.chunk.js","mappings":"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","sources":["components/Validate/Validate.js","pages/SignUpPage.js"],"sourcesContent":["import React from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nconst ValidateStyles = styled.div`\r\n  margin-left: 10px;\r\n  padding-left: 15px;\r\n  position: relative;\r\n  color: ${(props) => props.theme.gray6B};\r\n  &::after {\r\n    content: \"\";\r\n    position: absolute;\r\n    background: ${(props) => props.theme.gray6B};\r\n    border-radius: 100rem;\r\n    top: 45%;\r\n    left: 0;\r\n    transform: translateY(-50%);\r\n    width: 6px;\r\n    height: 6px;\r\n  }\r\n`;\r\nconst Validate = ({ children, className }) => {\r\n  return <ValidateStyles className={className}>{children}</ValidateStyles>;\r\n};\r\n\r\nexport default Validate;\r\n","import { yupResolver } from \"@hookform/resolvers/yup\";\r\nimport { Button } from \"components/Button\";\r\nimport { Field } from \"components/Field\";\r\nimport { Input, InputPassword } from \"components/Input\";\r\nimport { Label } from \"components/Label\";\r\nimport { Layout } from \"components/Layout\";\r\nimport { Validate } from \"components/Validate\";\r\nimport { useAuth } from \"contexts/auth-context\";\r\nimport { auth, db } from \"firebase-app/firebase-config\";\r\nimport { createUserWithEmailAndPassword, updateProfile } from \"firebase/auth\";\r\nimport { doc, serverTimestamp, setDoc } from \"firebase/firestore\";\r\nimport { useEffect } from \"react\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport { toast } from \"react-toastify\";\r\nimport { signUpSchema } from \"schema/schema\";\r\nimport slugify from \"slugify\";\r\nimport { userRole, userStatus } from \"utils/constants\";\r\nimport AuthenticationPage from \"./AuthenticationPage\";\r\nimport Homepage from \"./Homepage\";\r\n\r\nconst SignUpPage = () => {\r\n  const navigate = useNavigate();\r\n  const { userInfo, setUserInfo } = useAuth();\r\n  const {\r\n    control,\r\n    handleSubmit,\r\n    formState: { errors, isSubmitting, isValid },\r\n  } = useForm({\r\n    mode: \"onSubmit\",\r\n    resolver: yupResolver(signUpSchema),\r\n  });\r\n  useEffect(() => {\r\n    document.body.scrollIntoView({ block: \"start\" });\r\n  }, []);\r\n  useEffect(() => {\r\n    const arrErrors = Object.values(errors);\r\n    if (arrErrors.length > 0) {\r\n      toast.dismiss(arrErrors.find((item) => item === 0));\r\n      toast.error(arrErrors[0]?.message, {\r\n        pauseOnHover: true,\r\n        closeOnClick: true,\r\n      });\r\n    }\r\n  }, [errors]);\r\n\r\n  const handleSignUp = async (values) => {\r\n    try {\r\n      if (!isValid) return;\r\n      toast.info(\"Signing up, please wait...\", {\r\n        hideProgressBar: true,\r\n      });\r\n      const user = await createUserWithEmailAndPassword(\r\n        auth,\r\n        values.email,\r\n        values.password\r\n      );\r\n      await updateProfile(auth.currentUser, {\r\n        displayName: values.username,\r\n      });\r\n      await updateProfile(auth.currentUser, {\r\n        photoURL: `https://ui-avatars.com/api/?background=random&name=${values.username}`,\r\n      });\r\n      await setUserInfo(user);\r\n\r\n      await setDoc(doc(db, \"users\", auth.currentUser.uid), {\r\n        username: values.username,\r\n        avatar: auth.currentUser.photoURL,\r\n        email: values.email,\r\n        password: values.password,\r\n        createdAt: serverTimestamp(),\r\n        status: userStatus.ACTIVE,\r\n        role: userRole.USER,\r\n        usernameSlug: slugify(values.username, { lower: true }),\r\n        userId: auth.currentUser.uid,\r\n      });\r\n\r\n      toast.dismiss();\r\n      toast.success(\"Created account successfully!\", {\r\n        hideProgressBar: true,\r\n      });\r\n      navigate(\"/\");\r\n    } catch (error) {\r\n      console.log(error);\r\n      toast.error(\r\n        \"This e-mail address has already been used, please pick another one!\"\r\n      );\r\n    }\r\n  };\r\n  if (userInfo) return <Homepage></Homepage>;\r\n\r\n  return (\r\n    <Layout>\r\n      <AuthenticationPage>\r\n        <form\r\n          className=\"form\"\r\n          onSubmit={handleSubmit(handleSignUp)}\r\n          autoComplete=\"off\"\r\n        >\r\n          <Field>\r\n            <Label htmlFor=\"username\">Username</Label>\r\n            <Input\r\n              type=\"text\"\r\n              name=\"username\"\r\n              placeholder=\"Enter your username\"\r\n              control={control}\r\n            ></Input>\r\n            <Validate>Your username must have less than 24 characters</Validate>\r\n          </Field>\r\n          <Field>\r\n            <Label htmlFor=\"email\">Email address</Label>\r\n            <Input\r\n              type=\"text\"\r\n              name=\"email\"\r\n              placeholder=\"Enter your email\"\r\n              control={control}\r\n            ></Input>\r\n            <Validate>\r\n              Your email address must be in the correct pattern (e.g:\r\n              foobar@gmail.com)\r\n            </Validate>\r\n          </Field>\r\n          <Field>\r\n            <Label htmlFor=\"password\">Password</Label>\r\n            <InputPassword control={control}></InputPassword>\r\n            <Validate>Your password must have more than 8 characters</Validate>\r\n          </Field>\r\n          <Field>\r\n            <Label htmlFor=\"confirmPassword\">Re-confirm password</Label>\r\n            <InputPassword\r\n              name=\"confirmPassword\"\r\n              control={control}\r\n            ></InputPassword>\r\n          </Field>\r\n          <Button\r\n            type=\"submit\"\r\n            isLoading={isSubmitting}\r\n            disabled={isSubmitting}\r\n          >\r\n            Sign up\r\n          </Button>\r\n          <div className=\"redirect\">\r\n            Already had an account?{\" \"}\r\n            <Link className=\"redirect-link\" to=\"/sign-in\">\r\n              Sign in here\r\n            </Link>\r\n          </div>\r\n        </form>\r\n      </AuthenticationPage>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default SignUpPage;\r\n"],"names":["ValidateStyles","styled","props","theme","gray6B","children","className","navigate","useNavigate","useAuth","userInfo","setUserInfo","useForm","mode","resolver","yupResolver","signUpSchema","control","handleSubmit","formState","errors","isSubmitting","isValid","useEffect","document","body","scrollIntoView","block","arrErrors","Object","values","length","toast","find","item","message","pauseOnHover","closeOnClick","handleSignUp","hideProgressBar","createUserWithEmailAndPassword","auth","email","password","user","updateProfile","displayName","username","photoURL","setDoc","doc","db","avatar","createdAt","serverTimestamp","status","userStatus","role","userRole","usernameSlug","slugify","lower","userId","console","log","Homepage","Layout","AuthenticationPage","onSubmit","autoComplete","Field","Label","htmlFor","Input","I","type","name","placeholder","Button","isLoading","disabled","to"],"sourceRoot":""}