{"version":3,"file":"static/js/419.6a4ca182.chunk.js","mappings":"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","sources":["components/Radio/Radio.js","components/Textarea/Textarea.js","module/User/UserUpdate.js"],"sourcesContent":["import React from \"react\";\r\nimport { useController } from \"react-hook-form\";\r\n\r\nconst Radio = ({ checked, children, control, name, ...props }) => {\r\n  const { field } = useController({\r\n    control,\r\n    name,\r\n    defaultValue: \"\",\r\n  });\r\n  return (\r\n    <label>\r\n      <input\r\n        checked={checked}\r\n        type=\"radio\"\r\n        className=\"hidden-input\"\r\n        {...field}\r\n        {...props}\r\n      />\r\n      <div className=\"flex items-center font-medium cursor-pointer gap-x-3\">\r\n        <div\r\n          className={`w-7 h-7 rounded-full border flex items-center justify-center p-1  ${\r\n            checked\r\n              ? \"bg-primary border-primary text-white\"\r\n              : \"border-gray-300 border-2 text-transparent\"\r\n          }`}\r\n        >\r\n          <svg\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            className=\"w-6 h-6\"\r\n            fill=\"none\"\r\n            viewBox=\"0 0 24 24\"\r\n            stroke=\"currentColor\"\r\n            strokeWidth=\"2\"\r\n          >\r\n            <path\r\n              strokeLinecap=\"round\"\r\n              strokeLinejoin=\"round\"\r\n              d=\"M5 13l4 4L19 7\"\r\n            />\r\n          </svg>\r\n        </div>\r\n        <span>{children}</span>\r\n      </div>\r\n    </label>\r\n  );\r\n};\r\n\r\nexport default Radio;\r\n","import React from \"react\";\r\nimport { useController } from \"react-hook-form\";\r\nimport styled from \"styled-components\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nconst TextareaStyles = styled.div`\r\n  position: relative;\r\n  width: 100%;\r\n  textarea {\r\n    user-select: none;\r\n    font-weight: 500;\r\n    padding: 16px 20px;\r\n    background: ${(props) => props.theme.grayLight};\r\n    width: 100%;\r\n    border-radius: 8px;\r\n    transition: all 150ms ease-in-out;\r\n    border: 2px solid transparent;\r\n    resize: none;\r\n    min-height: 300px;\r\n    &:focus {\r\n      background-size: white;\r\n      border-color: ${(props) => props.theme.primary};\r\n    }\r\n    &::placeholder {\r\n      color: #84878b;\r\n    }\r\n    &::-webkit-input-placeholder {\r\n      color: #84878b;\r\n    }\r\n    &::-moz-input-placeholder {\r\n      color: #84878b;\r\n    }\r\n  }\r\n`;\r\nconst Textarea = ({\r\n  name = \"\",\r\n  type = \"text\",\r\n  children,\r\n  control,\r\n  ...props\r\n}) => {\r\n  const { field } = useController({\r\n    control,\r\n    name,\r\n    defaultValue: \"\",\r\n  });\r\n  return (\r\n    <TextareaStyles hasIcon={children ? true : false}>\r\n      <textarea type={type} id={name} {...field} {...props} />\r\n    </TextareaStyles>\r\n  );\r\n};\r\n\r\nTextarea.propTypes = {\r\n  name: PropTypes.string.isRequired,\r\n  type: PropTypes.string,\r\n  children: PropTypes.node,\r\n  control: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default Textarea;\r\n","import { yupResolver } from \"@hookform/resolvers/yup\";\r\nimport { Button } from \"components/Button\";\r\nimport { Field, FieldCheckbox } from \"components/Field\";\r\nimport { Input } from \"components/Input\";\r\nimport { Label } from \"components/Label\";\r\nimport { Radio } from \"components/Radio\";\r\nimport { Textarea } from \"components/Textarea\";\r\nimport { ImageUpload } from \"components/Upload\";\r\nimport { db } from \"firebase-app/firebase-config\";\r\nimport { doc, getDoc, updateDoc } from \"firebase/firestore\";\r\nimport useFirebaseImage from \"hooks/useFirebaseImage\";\r\nimport DashboardHeading from \"module/Category/DashboardHeading\";\r\nimport { useEffect } from \"react\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { useNavigate, useSearchParams } from \"react-router-dom\";\r\nimport { toast } from \"react-toastify\";\r\nimport { userUpdateSchema } from \"schema/schema\";\r\nimport slugify from \"slugify\";\r\nimport { userRole, userStatus } from \"utils/constants\";\r\n\r\nconst UserUpdate = () => {\r\n  const [searchParams] = useSearchParams();\r\n  const navigate = useNavigate();\r\n  const {\r\n    control,\r\n    reset,\r\n    watch,\r\n    handleSubmit,\r\n    setValue,\r\n    getValues,\r\n    formState: { errors, isSubmitting },\r\n  } = useForm({\r\n    mode: \"onSubmit\",\r\n    defaultValues: {\r\n      status: userStatus.ACTIVE,\r\n    },\r\n    resolver: yupResolver(userUpdateSchema),\r\n  });\r\n  const userId = searchParams.get(\"userId\");\r\n  const watchUserStatus = Number(watch(\"status\"));\r\n  const watchUserRole = Number(watch(\"role\"));\r\n  const avatarURL = getValues(\"avatar\");\r\n  const imageRegex = /%2F(\\S+)\\?/gm.exec(avatarURL);\r\n  const imageName = imageRegex?.length > 0 ? imageRegex[1] : \"\";\r\n  const {\r\n    handleRemoveImage,\r\n    setImageURL,\r\n    imageURL,\r\n    handleSelectImage,\r\n    progress,\r\n  } = useFirebaseImage(setValue, getValues, imageName, deleteAvatar);\r\n  useEffect(() => {\r\n    async function getCurrentUserValue() {\r\n      if (!userId) return;\r\n      const docRef = doc(db, \"users\", userId);\r\n      await getDoc(docRef).then((doc) => {\r\n        reset(doc.data());\r\n      });\r\n    }\r\n    getCurrentUserValue();\r\n  }, [userId, reset]);\r\n\r\n  useEffect(() => {\r\n    const arrErrors = Object.values(errors);\r\n    if (arrErrors.length > 0) {\r\n      toast.dismiss(arrErrors.find((item) => item === 0));\r\n      toast.error(arrErrors[0]?.message, {\r\n        pauseOnHover: true,\r\n        closeOnClick: true,\r\n      });\r\n    }\r\n  }, [errors]);\r\n\r\n  const handleUpdateUser = async (values) => {\r\n    const cloneValues = { ...values };\r\n    const docRef = doc(db, \"users\", userId);\r\n    try {\r\n      await updateDoc(docRef, {\r\n        ...cloneValues,\r\n        avatar: imageURL,\r\n        usernameSlug: slugify(cloneValues.username, { lower: true }),\r\n        status: Number(cloneValues.status),\r\n        role: Number(cloneValues.role),\r\n      });\r\n      toast.success(\"Update user successfully\", {\r\n        closeOnClick: true,\r\n      });\r\n      navigate(\"/manage/user\");\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n  async function deleteAvatar() {\r\n    const docRef = doc(db, \"users\", userId);\r\n    const docData = await getDoc(docRef);\r\n    const userData = docData.data();\r\n    await updateDoc(docRef, {\r\n      avatar: `https://ui-avatars.com/api/?background=random&name=${userData.username}`,\r\n    });\r\n  }\r\n  useEffect(() => {\r\n    setImageURL(avatarURL);\r\n  }, [avatarURL, setImageURL]);\r\n  if (!userId) return null;\r\n  return (\r\n    <div>\r\n      <DashboardHeading\r\n        title=\"Update user\"\r\n        desc=\"Update user's information\"\r\n      ></DashboardHeading>\r\n      <form onSubmit={handleSubmit(handleUpdateUser)}>\r\n        <div className=\"w-[250px] h-[250px] mx-auto rounded-full mb-10\">\r\n          <ImageUpload\r\n            name=\"image\"\r\n            className=\"h-full rounded-full\"\r\n            onChange={handleSelectImage}\r\n            handleRemoveImage={handleRemoveImage}\r\n            scrollable={false}\r\n            centeredCloseIcon={true}\r\n            imageURL={imageURL}\r\n            progress={progress}\r\n          ></ImageUpload>\r\n        </div>\r\n        <div className=\"form-layout-2\">\r\n          <Field>\r\n            <Label>Username</Label>\r\n            <Input\r\n              name=\"username\"\r\n              placeholder=\"Enter your username\"\r\n              control={control}\r\n            ></Input>\r\n          </Field>\r\n\r\n          <Field>\r\n            <Label>Email</Label>\r\n            <Input\r\n              name=\"email\"\r\n              placeholder=\"Enter your email address\"\r\n              control={control}\r\n              type=\"email\"\r\n            ></Input>\r\n          </Field>\r\n        </div>\r\n        <div className=\"form-layout\">\r\n          <Field>\r\n            <Label>Bio</Label>\r\n            <Textarea\r\n              name=\"bio\"\r\n              placeholder=\"Enter your bio\"\r\n              control={control}\r\n            ></Textarea>\r\n          </Field>\r\n        </div>\r\n        <div className=\"form-layout\">\r\n          <Field>\r\n            <Label>Status</Label>\r\n            <FieldCheckbox>\r\n              <Radio\r\n                name=\"status\"\r\n                control={control}\r\n                checked={watchUserStatus === userStatus.ACTIVE}\r\n                value={userStatus.ACTIVE}\r\n              >\r\n                Active\r\n              </Radio>\r\n              <Radio\r\n                name=\"status\"\r\n                control={control}\r\n                checked={watchUserStatus === userStatus.PENDING}\r\n                value={userStatus.PENDING}\r\n              >\r\n                Pending\r\n              </Radio>\r\n              <Radio\r\n                name=\"status\"\r\n                control={control}\r\n                checked={watchUserStatus === userStatus.BANNED}\r\n                value={userStatus.BANNED}\r\n              >\r\n                Banned\r\n              </Radio>\r\n            </FieldCheckbox>\r\n          </Field>\r\n          <Field>\r\n            <Label>Role</Label>\r\n            <FieldCheckbox>\r\n              <Radio\r\n                name=\"role\"\r\n                control={control}\r\n                checked={watchUserRole === userRole.ADMIN}\r\n                value={userRole.ADMIN}\r\n              >\r\n                Admin\r\n              </Radio>\r\n              <Radio\r\n                name=\"role\"\r\n                control={control}\r\n                checked={watchUserRole === userRole.MOD}\r\n                value={userRole.MOD}\r\n              >\r\n                Moderator\r\n              </Radio>\r\n              <Radio\r\n                name=\"role\"\r\n                control={control}\r\n                checked={watchUserRole === userRole.USER}\r\n                value={userRole.USER}\r\n              >\r\n                User\r\n              </Radio>\r\n            </FieldCheckbox>\r\n          </Field>\r\n        </div>\r\n        <Button\r\n          kind=\"primary\"\r\n          type=\"submit\"\r\n          isLoading={isSubmitting}\r\n          disabled={isSubmitting}\r\n          className=\"mx-auto w-[200px]\"\r\n        >\r\n          Update user\r\n        </Button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserUpdate;\r\n"],"names":["checked","children","control","name","props","field","useController","defaultValue","type","className","xmlns","fill","viewBox","stroke","strokeWidth","strokeLinecap","strokeLinejoin","d","TextareaStyles","styled","theme","grayLight","primary","hasIcon","id","useSearchParams","searchParams","navigate","useNavigate","useForm","mode","defaultValues","status","userStatus","resolver","yupResolver","userUpdateSchema","reset","watch","handleSubmit","setValue","getValues","formState","errors","isSubmitting","userId","get","watchUserStatus","Number","watchUserRole","avatarURL","imageRegex","exec","imageName","length","useFirebaseImage","handleRemoveImage","setImageURL","imageURL","handleSelectImage","progress","useEffect","docRef","doc","db","getDoc","then","data","getCurrentUserValue","arrErrors","Object","values","toast","find","item","message","pauseOnHover","closeOnClick","handleUpdateUser","cloneValues","updateDoc","avatar","usernameSlug","slugify","username","lower","role","console","log","docData","userData","DashboardHeading","title","desc","onSubmit","onChange","scrollable","centeredCloseIcon","Field","Label","Input","I","placeholder","Radio","value","userRole","Button","kind","isLoading","disabled"],"sourceRoot":""}